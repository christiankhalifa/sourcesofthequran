<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quran Reference Form</title>
  <style>
    body {
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 40px;
      background: linear-gradient(135deg, #e0f7fa, #f1f8e9);
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }

    form {
      flex: 1 1 600px;
      max-width: 900px;
      background: #fff;
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 8px 18px rgba(0,0,0,0.1);
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px 30px;
    }

    h2 {
      grid-column: 1 / -1;
      text-align: center;
      margin-bottom: 20px;
      color: #2e7d32;
    }

    label {
      display: block;
      margin-bottom: 6px;
      font-weight: bold;
      color: #333;
    }

    input, select, textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    input:focus, select:focus, textarea:focus {
      border-color: #2e7d32;
      box-shadow: 0 0 6px rgba(46,125,50,0.4);
      outline: none;
    }

    textarea {
      resize: vertical;
      min-height: 80px;
    }

    button {
      grid-column: 1 / -1;
      margin-top: 15px;
      padding: 14px;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: bold;
      background: linear-gradient(135deg, #4caf50, #2e7d32);
      color: white;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.2s;
    }

    button:hover {
      background: linear-gradient(135deg, #43a047, #1b5e20);
      transform: translateY(-2px);
    }

    /* Collapsible Legend Styles */
    .legend-box {
      flex: 1 1 280px;
      background: #ffffff;
      border-radius: 16px;
      box-shadow: 0 6px 12px rgba(0,0,0,0.1);
      overflow: hidden;
      height: fit-content;
    }

    .legend-header {
      background: #2e7d32;
      color: white;
      padding: 14px;
      cursor: pointer;
      font-weight: bold;
      font-size: 16px;
    }

    .legend-content {
      display: none;
      padding: 16px;
      font-size: 13px;
      color: #333;
      max-height: 600px;
      overflow-y: auto;
      line-height: 1.5;
    }

    .legend-content p {
      margin: 0 0 8px;
    }

    .legend-content strong {
      color: #1b5e20;
    }

    @media (max-width: 900px) {
      body { flex-direction: column; }
      .legend-box { order: 2; }
    }
  </style>
</head>
<body>

  <form id="myForm">
    <h2>Quran Reference Form</h2>

    <div><label for="surah">Surah Number:</label><input type="number" id="surah" name="surah" min="1" max="114" required></div>
    <div><label for="ayat">Ayat:</label><input type="text" id="ayat" name="ayat" placeholder="e.g., 1-5"></div>

    <div>
      <label for="category">Category:</label>
      <select id="category" name="category">
        <option value="">-- Select Category --</option>
        <option value="Biblical">Biblical</option>
        <option value="Jewish">Jewish</option>
        <option value="Christian">Christian</option>
        <option value="Other">Other</option>
      </select>
    </div>

    <div><label for="reference">Reference:</label><input type="text" id="reference" name="reference"></div>
    <div><label for="link">Link to the Source:</label><input type="text" id="link" name="link"></div>
    <div><label for="source">Source Name:</label><input type="text" id="source" name="source"></div>
    <!-- <div><label for="rewr">Rewrite/Response:</label><input type="text" id="rewr" name="rewr"></div> -->
    <div><label for="lang">Presumed Original Language:</label><input type="text" id="lang" name="lang"></div>
    <div><label for="origin">Presumed Place of Origin:</label><input type="text" id="origin" name="origin"></div>
    <div><label for="credit-text">Credit for Text:</label><input type="text" id="credit-text" name="credit-text"></div>
    <div><label for="credit-ms">Credit for MS Name:</label><input type="text" id="credit-ms" name="credit-ms"></div>
    <div><label for="ms-name">MS Name:</label><input type="text" id="ms-name" name="ms-name"></div>
    <div><label for="preserved-text">Preserved Text (.. to ..):</label><input type="text" id="preserved-text" name="preserved-text"></div>
    <div><label for="language">Language:</label><input type="text" id="language" name="language"></div>
    <div><label for="archive">Archive:</label><input type="text" id="archive" name="archive"></div>
    <div><label for="ref-ms">Reference to Manuscript:</label><input type="text" id="ref-ms" name="ref-ms"></div>
    <div><label for="date-range">Date Range:</label><input type="text" id="date-range" name="date-range"></div>
    <div><label for="ref-transcription">Reference to MS Transcription:</label><input type="text" id="ref-transcription" name="ref-transcription"></div>
    <div><label for="translator">Translator:</label><input type="text" id="translator" name="translator"></div>
    <div><label for="ref-translation">Reference to MS Translation:</label><input type="text" id="ref-translation" name="ref-translation"></div>

    <div>
      <label for="frequent-formula">Frequent Formula:</label>
      <select id="frequent-formula" name="frequent-formula">
        <option value="">-- Select --</option>
        <option value="Yes">Yes</option>
        <option value="No">No</option>
      </select>
    </div>

    <div id="frequent-formula-text-container" style="display:none;">
      <label for="frequent-formula-text">Frequent Formula Text:</label>
      <input type="text" id="frequent-formula-text" name="frequent-formula-details" placeholder="Enter the repeated phrase">
    </div>

    <div><label for="unit">Unit (... to ‚Ä¶):</label><input type="text" id="unit" name="unit" placeholder="e.g., verse 1 to verse 5"></div>
    <div id="interpol-container" style="display:none;"><label for="interpol">Interpolation:</label><textarea id="interpol" name="interpol" placeholder="Separate multiple with ; if needed"></textarea></div>

    <div>
      <label for="par-pass-pp">Parallel Passages:</label>
      <select id="par-pass-pp" name="par-pass-pp">
        <option value="">-- Select --</option>
        <option value="Yes">Yes</option>
        <option value="No">No</option>
      </select>
    </div>

    <div id="par-pass-semicolon-container" style="display:none;">
      <label for="par-pass-semicolon">Parallel Passages:</label>
      <textarea id="par-pass-semicolon" name="par-pass-semicolon" placeholder="Separate multiple with ; if needed"></textarea>
    </div>

    <div>
      <label for="rel-passages-select">Related Passages:</label>
      <select id="rel-passages-select" name="rel-passages-yesno">
        <option value="">-- Select --</option>
        <option value="Yes">Yes</option>
        <option value="No">No</option>
      </select>
    </div>

    <div id="rel-passages-container" style="display:none;">
      <label for="rel-passages">Related Passages:</label>
      <textarea id="rel-passages" name="rel-passages" placeholder="Separate multiple with ; if needed"></textarea>
    </div>

    <button type="submit">Submit</button>
  </form>

  <!-- Collapsible Legend -->
  <div class="legend-box">
    <div class="legend-header" onclick="toggleLegend()">üìò Field Legend</div>
    <div class="legend-content" id="legend">
      <p><strong>Surah:</strong> Chapter number in the Qur‚Äôan (1‚Äì114).</p>
      <p><strong>Ayat:</strong> Verse(s) within the Surah (e.g., 1‚Äì5).</p>
      <p><strong>Category:</strong> Theme classification ‚Äî Biblical, Jewish, Christian, or Other.</p>
      <p><strong>Reference:</strong> The specific text or source cited.</p>
      <p><strong>Link:</strong> URL to the reference or source.</p>
      <p><strong>Source:</strong> Title or origin of the text or manuscript.</p>
      <!-- <p><strong>Rewrite/Response:</strong> Your rewritten version or interpretation.</p> -->
      <p><strong>Presumed Original Language:</strong> Original writing language (e.g., Hebrew, Greek).</p>
      <p><strong>Presumed Place of Origin:</strong> Geographic region where the text originated.</p>
      <p><strong>Credit for Text:</strong> Acknowledgment of the author or provider of the text.</p>
      <p><strong>Credit for MS Name:</strong> Name of person or institution credited for the manuscript.</p>
      <p><strong>MS Name:</strong> The official manuscript name or catalog ID.</p>
      <p><strong>Preserved Text:</strong> Portion of the text that is preserved (e.g., verses 10‚Äì15).</p>
      <p><strong>Language:</strong> The current language of the text.</p>
      <p><strong>Archive:</strong> Archive or library where the manuscript is held.</p>
      <p><strong>Reference to MS:</strong> Citation or shelf ID of the manuscript.</p>
      <p><strong>Date Range:</strong> Estimated period the text/manuscript was written.</p>
      <p><strong>Reference to MS Transcription:</strong> Citation for transcribed versions.</p>
      <p><strong>Translator:</strong> Person who translated the manuscript.</p>
      <p><strong>Reference to MS Translation:</strong> Citation or link for the translation.</p>
      <p><strong>Frequent Formula:</strong> Marks recurring formulaic phrases (e.g., ‚ÄúIn the name of God‚Ä¶‚Äù).</p>
      <p><strong>Frequent Formula Text:</strong> The phrase itself if ‚ÄúYes‚Äù was selected.</p>
      <p><strong>Unit:</strong> Textual range under discussion (e.g., verse 1‚Äì5).</p>
      <p><strong>Interpolation:</strong> Later additions or insertions in text; separate with ‚Äú;‚Äù.</p>
      <p><strong>Parallel Passages:</strong> Identifies whether parallel texts exist within the Quran.</p>
      <p><strong>Related Passages:</strong> Other related or thematically similar verses.</p>
    </div>
  </div>

  <script>
    const scriptURL = "https://script.google.com/macros/s/AKfycbzd86ZQRMg3mE6kCKFCo3ApkpqJJqe4voTy5Zu30EpxKDTSFUXVLHaU7YpFAupaArES4A/exec";
    const form = document.getElementById("myForm");

    function toggleLegend() {
      const legend = document.getElementById("legend");
      legend.style.display = legend.style.display === "block" ? "none" : "block";
    }

    // Show/hide conditional fields
    document.getElementById("frequent-formula").addEventListener("change", e => {
      document.getElementById("frequent-formula-text-container").style.display = e.target.value === "Yes" ? "block" : "none";
    });

    document.getElementById("par-pass-pp").addEventListener("change", e => {
      document.getElementById("par-pass-semicolon-container").style.display = e.target.value === "Yes" ? "block" : "none";
    });

    document.getElementById("rel-passages-select").addEventListener("change", e => {
      document.getElementById("rel-passages-container").style.display = e.target.value === "Yes" ? "block" : "none";
    });

    document.getElementById("unit").addEventListener("input", e => {
      document.getElementById("interpol-container").style.display = e.target.value.trim() ? "block" : "none";
    });

    form.addEventListener("submit", e => {
      e.preventDefault();
      const formData = new FormData(form);
      fetch(scriptURL, { method: "POST", body: formData })
        .then(() => {
          alert("‚úÖ Submitted successfully!");
          form.reset();
          document.getElementById("interpol-container").style.display = "none";
          document.getElementById("frequent-formula-text-container").style.display = "none";
          document.getElementById("par-pass-semicolon-container").style.display = "none";
          document.getElementById("rel-passages-container").style.display = "none";
        })
        .catch(err => alert("‚ùå Error: " + err));
    });
  </script>
</body>
</html>
